<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ВНИМАНИЕ: СИСТЕМНОЕ ОБНОВЛЕНИЕ</title>
    <style>
        /* Общие стили для центрирования */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            /* Важно для корректного полноэкранного режима */
            transition: background-color 0.5s; 
        }

        /* КОНТЕЙНЕР "УСТАНОВКИ" */
        .container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            text-align: center;
            viber-width: 300px;
            width: 100%;
            transition: viber-width 0.5s ease-in-out, opacity 0.5s;
        }

        /* ... Стили для иконки, заголовков и кнопки остались прежними ... */
        .icon { width: 100px; height: 100px; object-fit: contain; margin-bottom: 20px; border-radius: 18px; }
        h2 { margin: 0 0 10px 0; color: #333; font-size: 20px; }
        p { color: #666; font-size: 14px; margin-bottom: 30px; }
        .install-btn { background-color: #007AFF; color: white; border: none; padding: 12px 40px; font-size: 16px; font-weight: bold; border-radius: 25px; cursor: pointer; transition: transform 0.1s, background-color 0.2s; width: 100%; }
        .install-btn:hover { background-color: #0062cc; }
        .install-btn:active { transform: scale(0.98); }


        /* СТИЛЬ ДЛЯ ПОЛНОЭКРАННОЙ КОНСОЛИ ВЗЛОМА */
        .hacking-console {
            display: none;
            position: fixed; /* Закрепляем на экране */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 10px;
            
            /* Цветовая схема консоли */
            background-color: #000;
            color: #00FF00; 
            
            text-align: left;
            overflow-y: auto;
            font-size: 1em;
            font-family: 'Consolas', 'Courier New', monospace;
            z-index: 9999; /* Поверх всего */
            opacity: 0; /* Изначально прозрачно */
            transition: opacity 0.5s ease-in;
        }
        
        /* Скрываем все содержимое "установки" после начала взлома */
        .container.hidden {
            opacity: 0;
            pointer-events: none;
            position: absolute; /* Убираем его из потока */
        }
        
        .hacking-console p {
            margin: 0;
            padding: 0;
            white-space: pre-wrap;
            line-height: 1.4;
        }

        /* Стиль для финального сообщения */
        .hacking-console p.final-msg {
            color: #CC0000;
            font-weight: bold;
        }
    </style>
</head>
<body id="page-body">

    <div class="container" id="main-container">
        <img src="Logo.png" alt="App Icon" class="icon" id="app-icon">
        
        <h2 id="title">Системное обновление</h2>
        <p id="subtitle">Требуется установка компонентов.</p>

        <button class="install-btn" id="btn" onclick="startPrank()">Установить</button>
    </div>

    <div class="hacking-console" id="status-console"></div>

    <script>
        // Функция для запроса полноэкранного режима
        function requestFullscreen() {
            const element = document.documentElement; // Весь документ
            if (element.requestFullscreen) {
                element.requestFullscreen();
            } else if (element.mozRequestFullScreen) { /* Firefox */
                element.mozRequestFullScreen();
            } else if (element.webkitRequestFullscreen) { /* Chrome, Safari and Opera */
                element.webkitRequestFullscreen();
            } else if (element.msRequestFullscreen) { /* IE/Edge */
                element.msRequestFullscreen();
            }
        }

        // Функция для запуска всего пранка
        function startPrank() {
            requestFullscreen(); // Запрашиваем полноэкранный режим при клике
            
            const btn = document.getElementById('btn');
            const title = document.getElementById('title');
            const subtitle = document.getElementById('subtitle');
            
            // 1. Изменяем внешний вид
            btn.disabled = true;
            btn.innerText = "Идет установка...";
            btn.style.backgroundColor = "#ccc";
            title.innerText = "Внимание!";
            subtitle.innerText = "Не отключайте устройство от сети.";

            // 2. Логика звука (5 повторов)
            const audioPath = 'sound.mp3';
            const audio = new Audio(audioPath);
            
            let playCount = 0;
            const viberPlays = 2; // Снова 5 повторов, как вы просили изначально
            audio.volume = 1.0; 

            function playNext() {
                if (playCount < viberPlays) {
                    btn.innerText = `Установка... (${playCount + 1}/${viberPlays})`;
                    
                    audio.currentTime = 0; 
                    audio.play().catch(error => {
                        console.error("Ошибка воспроизведения:", error);
                        // Если звук не сработал (например, нет файла), начинаем "взлом"
                        startHackingText(); 
                    });
                    playCount++;
                } else {
                    // Звук закончился
                    btn.innerText = "Компоненты установлены.";
                    // Задержка перед началом "взлома"
                    setTimeout(startHackingText, 500); 
                }
            }

            // Запускаем первый раз
            playNext();
            audio.onended = function() {
                playNext();
            };
        }

        // Функция, имитирующая процесс "взлома"
        function startHackingText() {
            const container = document.getElementById('main-container');
            const statusConsole = document.getElementById('status-console');
            const body = document.getElementById('page-body');
            
            // 1. Переключаем на вид "Консоль"
            body.style.backgroundColor = '#000'; // Черный фон для всего экрана
            container.classList.add('hidden'); // Скрываем блок установки
            
            // 2. Показываем полноэкранную консоль
            statusConsole.style.display = "block";
            statusConsole.style.opacity = 1;
            statusConsole.innerHTML = '';
            
            // Сообщения для вывода
            const hackMessages = [
                "*** WARNING: KERNEL HACK ***",
                "INIT: CONECTED>PASS.",
                "TARGET: system32_user_data_path.ini",
                "STATUS: Поиск уязвимостей в протоколе SSL [10%]...",
                "ACCESS: Получение прав суперпользователя [30%]...",
                "ACCESS: Права получены. Вход в систему...",
                "ACTION: Запуск программы 'HACK'...",
                "---------------------------------------------------",
                "*** HRU Svintus Hack ***",
                "Выключение устройства через 5...",
                 "Выключение устройства через 4...",
                  "Выключение устройства через 3...",
                   "Выключение устройства через 2...",
                    "Выключение устройства через 1...",
                    "REBOOT DEVICE...",
                    "!ERROR REBOOT!",
                    "viber SYSTEM DOWNLOAD...",
                    "viber > 0%",
                    "viber > 10%",
                    "viber > 30%",
                    "viber > 67%",
                    "viber > 100%",
                    "SYSTEM viber DOWNLOAD > PASS.",
                    "**************************************************",
                    "!!!YOUR DEVICE IS DAMAGED!!!" // Финальное сообщение
            ];

            let messageIndex = 0;

            function displayNextMessage() {
                if (messageIndex < hackMessages.length) {
                    const p = document.createElement('p');
                    p.textContent = hackMessages[messageIndex];
                    
                    // Выделяем финальные сообщения
                    if (messageIndex >= hackMessages.length - 2) {
                         p.classList.add('final-msg');
                    }
                    
                    statusConsole.appendChild(p);
                    // Прокрутка вниз
                    statusConsole.scrollTop = statusConsole.scrollHeight;
                    
                    messageIndex++;
                    
                    // Задержка между строками
                    let delay = messageIndex >= hackMessages.length - 2 ? 1500 : 200; // Уменьшил задержку для быстрого эффекта
                    setTimeout(displayNextMessage, delay); 
                }
            }

            displayNextMessage();
        }
    </script>
</body>
</html>
